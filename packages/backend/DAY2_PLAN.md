# План на День: Сессии и базы данных

## Цели:
1. Восстановить основную функциональность формы
2. Реализовать сессионную систему
3. Настроить работу с PostgreSQL
4. Добавить Redis для кэширования

## Шаги:

### Шаг 1: Создать сервис сессий
- Создать `src/services/session.service.ts`
- Перенести функции из оригинального index.ts
- Добавить TypeScript типы

### Шаг 2: Создать сервис базы данных
- Создать `src/services/database.service.ts`
- Реализовать CRUD операции для форм
- Добавить управление соединениями

### Шаг 3: Создать модели
- Создать `src/models/form.model.ts`
- Определить интерфейсы и типы
- Реализовать маппинг БД <-> TypeScript

### Шаг 4: Восстановить эндпоинт /api/submit
- Создать контроллер `src/controllers/form.controller.ts`
- Использовать новые сервисы
- Сохранить всю оригинальную логику

### Шаг 5: Восстановить эндпоинт /api/session
- Создать контроллер `src/controllers/session.controller.ts`
- Использовать session.service

### Шаг 6: Тестирование
- Проверить что форма отправляется
- Проверить что сессии создаются
- Проверить что данные сохраняются в БД

## Ожидаемый результат:
- ✅ Формы отправляются и сохраняются в PostgreSQL
- ✅ Сессии создаются и управляются через Redis
- ✅ Honeypot защита работает
- ✅ Rate limiting работает
- ✅ Все оригинальные функции восстановлены